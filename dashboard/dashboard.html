<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Monitoring Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --sidebar-width: 260px;
            --header-height: 60px;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --dark-bg: #1a1d23;
            --dark-sidebar: #252a32;
            --text-light: #a0a4a8;
            --border-color: #e0e0e0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            overflow-x: hidden;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--dark-sidebar);
            color: white;
            padding: 20px 0;
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        /* Toggle Button */
        .sidebar-toggle {
            position: fixed;
            left: var(--sidebar-width);
            bottom: 20px;
            width: 40px;
            height: 40px;
            background: var(--dark-sidebar);
            border: none;
            border-radius: 0 8px 8px 0;
            color: white;
            cursor: pointer;
            z-index: 999;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
        }

        .sidebar-toggle:hover {
            background: var(--primary-color);
            transform: translateX(5px);
        }

        .sidebar.collapsed + .sidebar-toggle {
            left: 0;
        }

        .sidebar-toggle i {
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed + .sidebar-toggle i {
            transform: rotate(180deg);
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .sidebar-logo i {
            font-size: 28px;
            color: var(--primary-color);
        }

        .sidebar-menu {
            list-style: none;
        }

        .menu-item {
            margin-bottom: 5px;
        }

        .menu-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
        }

        .menu-link:hover {
            background: rgba(102, 126, 234, 0.1);
            color: white;
        }

        .menu-link.active {
            background: rgba(102, 126, 234, 0.2);
            color: white;
            border-left: 3px solid var(--primary-color);
        }

        .menu-link i {
            width: 20px;
            text-align: center;
        }

        .menu-section {
            padding: 20px 20px 10px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            font-weight: 600;
        }

        .user-section {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .user-details h4 {
            font-size: 14px;
            margin-bottom: 2px;
        }

        .user-details p {
            font-size: 12px;
            color: var(--text-light);
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        /* Header */
        .header {
            background: white;
            height: var(--header-height);
            padding: 0 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left h1 {
            font-size: 24px;
            color: #333;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        /* Content Area */
        .content {
            padding: 30px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-icon.primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .stat-icon.success {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .stat-icon.warning {
            background: linear-gradient(135deg, #ffc107, #ff9800);
            color: white;
        }

        .stat-icon.danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }

        .stat-details h3 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-details p {
            color: #666;
            font-size: 14px;
        }

        /* Groups Section */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
        }

        .groups-container {
            margin-bottom: 30px;
        }

        .group-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .group-header {
            padding: 20px 24px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .group-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            cursor: pointer;
        }

        .group-stats {
            display: flex;
            gap: 24px;
            align-items: center;
            cursor: pointer;
        }

        .group-actions {
            display: flex;
            gap: 8px;
            margin-left: 16px;
        }

        .group-actions .action-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            background: white;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .group-actions .action-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .group-actions .action-btn.danger:hover {
            background: var(--danger-color);
        }

        .group-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--primary-color);
        }

        .group-details h3 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .group-details p {
            font-size: 13px;
            color: #666;
        }

        .group-stats {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .group-stat {
            text-align: center;
        }

        .group-stat .number {
            font-size: 20px;
            font-weight: 700;
            color: #333;
        }

        .group-stat .label {
            font-size: 12px;
            color: #666;
        }

        .group-toggle {
            font-size: 20px;
            color: #666;
            transition: transform 0.3s;
        }

        .group-toggle.collapsed {
            transform: rotate(-90deg);
        }

        .group-hosts {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .group-hosts.expanded {
            max-height: 2000px;
            padding: 20px;
        }

        .hosts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .host-card {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 16px;
            transition: all 0.3s;
            position: relative;
        }

        .host-card:hover {
            border-color: var(--primary-color);
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .host-card > div:last-child {
            cursor: pointer;
        }

        .host-actions {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            gap: 4px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .host-card:hover .host-actions {
            opacity: 1;
        }

        .action-btn-small {
            padding: 6px 8px;
            border: none;
            border-radius: 4px;
            background: white;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .action-btn-small:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }

        .action-btn-small.danger:hover {
            background: var(--danger-color);
        }

        .host-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .host-name {
            font-weight: 600;
            font-size: 15px;
            color: #333;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.online {
            background: var(--success-color);
        }

        .status-dot.offline {
            background: var(--danger-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .host-info {
            font-size: 13px;
            color: #666;
            margin-bottom: 12px;
        }

        .host-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .metric {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }

        .metric i {
            color: var(--primary-color);
        }

        .metric-value {
            font-weight: 600;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 22px;
            color: #333;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .modal-body {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-group .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 6px;
        }

        .api-key-display {
            background: #f8f9fa;
            border: 2px dashed var(--primary-color);
            border-radius: 8px;
            padding: 16px;
            margin-top: 12px;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 6px 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        .modal-footer {
            padding: 20px 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .sidebar.collapsed {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }

            .main-content.expanded {
                margin-left: 0;
            }

            .sidebar-toggle {
                left: 0 !important;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .hosts-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state i {
            font-size: 64px;
            color: #ccc;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 20px;
            color: #666;
            margin-bottom: 12px;
        }

        .empty-state p {
            color: #999;
            margin-bottom: 24px;
        }

        /* Settings Section */
        .settings-section {
            margin-bottom: 30px;
        }

        .settings-section h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-section h3 i {
            color: var(--primary-color);
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .data-table thead {
            background: #f8f9fa;
        }

        .data-table th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #e0e0e0;
        }

        .data-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #e0e0e0;
        }

        .data-table tbody tr:hover {
            background: #f8f9fa;
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge.admin {
            background: #667eea;
            color: white;
        }

        .badge.user {
            background: #e0e0e0;
            color: #666;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .badge-secondary {
            background: #e0e0e0;
            color: #666;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn.danger {
            background: #fee;
            color: #c33;
        }

        .action-btn.danger:hover {
            background: #fcc;
        }

        /* Channel Modal Additional Styles */
        .channel-config {
            display: none;
            margin-top: 15px;
        }

        .channel-config.active {
            display: block;
        }

        #channelModal .modal-content {
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .form-section {
            margin-bottom: 20px;
        }

        .form-section-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #667eea;
        }

        /* Alert Settings View Styles */
        .view-header {
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .view-header h1 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 28px;
        }

        .view-header p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .dashboard-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 20px;
        }

        .alert-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .form-group small {
            display: block;
            margin-top: 5px;
            font-size: 12px;
            color: #666;
            font-style: italic;
        }

        .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }

        .form-group input[type="number"],
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="password"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .card-body {
            padding: 0;
        }

        .channel-config h3 {
            font-size: 16px;
            font-weight: 600;
            color: #667eea;
            margin: 20px 0 15px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 13px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 16px;
            margin-bottom: 20px;
        }

        #channelsList,
        #alertHistoryList {
            min-height: 100px;
        }

        .channel-item {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: box-shadow 0.3s;
        }

        .channel-item:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            user-select: none;
        }

        /* Modal Overlay */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.show {
            display: flex;
        }

        @media (max-width: 768px) {
            .alert-stats-grid {
                grid-template-columns: 1fr;
            }

            .form-grid,
            .form-row {
                grid-template-columns: 1fr;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .form-actions,
            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Toast Notification Styles */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }

        .toast {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 16px 20px;
            min-width: 300px;
            max-width: 500px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.3s ease-out;
            pointer-events: auto;
            border-left: 4px solid #667eea;
        }

        .toast.success {
            border-left-color: #28a745;
        }

        .toast.error {
            border-left-color: #dc3545;
        }

        .toast.warning {
            border-left-color: #ffc107;
        }

        .toast.info {
            border-left-color: #17a2b8;
        }

        .toast-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .toast.success .toast-icon {
            color: #28a745;
        }

        .toast.error .toast-icon {
            color: #dc3545;
        }

        .toast.warning .toast-icon {
            color: #ffc107;
        }

        .toast.info .toast-icon {
            color: #17a2b8;
        }

        .toast-message {
            flex: 1;
            font-size: 14px;
            color: #333;
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 18px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .toast-close:hover {
            color: #333;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .toast.removing {
            animation: slideOut 0.3s ease-out;
        }

        /* Agent Tutorial Styles */
        .tutorial-container {
            padding: 20px;
        }

        .tab-navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: white;
            border: none;
            padding: 12px 24px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            color: #667eea;
            background: #f8f9fa;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }

        .tutorial-tab {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .tutorial-tab h2 {
            color: #333;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .tutorial-step {
            margin-bottom: 35px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .tutorial-step h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
        }

        .step-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }

        .tutorial-step p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .tutorial-step ul, .tutorial-step ol {
            margin-left: 25px;
            color: #555;
            line-height: 1.8;
        }

        .tutorial-step li {
            margin-bottom: 8px;
        }

        .code-block {
            position: relative;
            background: #1e1e1e;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .code-block code {
            color: #d4d4d4;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .copy-btn.copied {
            background: #28a745;
        }

        .alert-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            color: #0c5460;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .alert-info i {
            font-size: 20px;
            margin-top: 2px;
        }

        .success-text {
            color: #28a745;
            font-weight: 600;
        }

        .verification-section h2,
        .troubleshooting-section h2,
        .resources-section h2 {
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .verification-steps {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .verification-item {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .verification-item i {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .verification-item strong {
            color: #333;
            display: block;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .verification-item p {
            color: #666;
            margin: 0;
            line-height: 1.6;
        }

        .trouble-item {
            margin-bottom: 25px;
            padding: 20px;
            background: white;
            border-radius: 8px;
        }

        .trouble-item h4 {
            color: #333;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .trouble-item ul {
            margin-left: 20px;
            color: #555;
            line-height: 1.8;
        }

        .trouble-item code {
            background: #f0f0f0;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            color: #d63384;
        }

        .resource-card {
            text-align: center;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .resource-card h4 {
            color: #333;
            margin: 15px 0 10px;
            font-size: 16px;
        }

        .resource-card a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .resource-card a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .tab-navigation {
                flex-direction: column;
            }

            .tab-btn {
                width: 100%;
                justify-content: center;
            }

            .tutorial-tab {
                padding: 20px;
            }

            .tutorial-step {
                padding: 15px;
            }

            .code-block {
                padding: 15px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <i class="fas fa-chart-line"></i>
                <span>MonitorHub</span>
            </div>
        </div>

        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="#" class="menu-link active" data-view="dashboard">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="hosts">
                    <i class="fas fa-server"></i>
                    <span>All Hosts</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="groups">
                    <i class="fas fa-layer-group"></i>
                    <span>Groups</span>
                </a>
            </li>
        </ul>

        <div class="menu-section">Management</div>
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="add-host">
                    <i class="fas fa-plus-circle"></i>
                    <span>Add Host</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="add-group">
                    <i class="fas fa-folder-plus"></i>
                    <span>Add Group</span>
                </a>
            </li>
        </ul>

        <div class="menu-section">Help</div>
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="agent-tutorial">
                    <i class="fas fa-book"></i>
                    <span>Agent Installation</span>
                </a>
            </li>
        </ul>

        <div class="menu-section">Settings</div>
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="alerts">
                    <i class="fas fa-bell"></i>
                    <span>Alert Settings</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="account">
                    <i class="fas fa-user-circle"></i>
                    <span>Account Settings</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="users">
                    <i class="fas fa-users"></i>
                    <span>User Management</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" data-view="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>

        <div class="user-section">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">A</div>
                <div class="user-details">
                    <h4 id="userName">Admin</h4>
                    <p id="userRole">Administrator</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" id="sidebarToggle" title="Toggle Sidebar">
        <i class="fas fa-chevron-left"></i>
    </button>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        
        <!-- Dashboard View (Default) -->
        <div id="dashboardView" class="content-view">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 id="pageTitle">Dashboard Overview</h1>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <button class="btn btn-primary" id="addHostBtn">
                            <i class="fas fa-plus"></i>
                            Add Host
                        </button>
                        <button class="btn btn-secondary" id="refreshBtn">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <div class="content">
                <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon primary">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="totalHosts">0</h3>
                        <p>Total Hosts</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon success">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="onlineHosts">0</h3>
                        <p>Online</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon danger">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="offlineHosts">0</h3>
                        <p>Offline</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon warning">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="totalGroups">0</h3>
                        <p>Groups</p>
                    </div>
                </div>
            </div>

            <!-- Groups Container -->
            <div class="groups-container">
                <div class="section-header">
                    <h2 class="section-title">Server Groups</h2>
                    <button class="btn btn-secondary" id="addGroupBtn">
                        <i class="fas fa-folder-plus"></i>
                        Add Group
                    </button>
                </div>
                <div id="groupsList">
                    <!-- Groups will be loaded here -->
                </div>
            </div>
        </div>
        </div>
        <!-- End Dashboard View -->

    <!-- Add Host Modal -->
    <div class="modal" id="addHostModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Host</h2>
                <button class="close-modal" onclick="closeModal('addHostModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="hostAlert" class="alert"></div>
                <form id="addHostForm">
                    <div class="form-group">
                        <label for="hostname">Hostname *</label>
                        <input type="text" id="hostname" name="hostname" required placeholder="e.g., web-server-01">
                        <span class="help-text">Unique identifier for this host</span>
                    </div>
                    <div class="form-group">
                        <label for="ipAddress">IP Address</label>
                        <input type="text" id="ipAddress" name="ipAddress" placeholder="e.g., 192.168.1.100">
                        <span class="help-text">Optional: Server IP address</span>
                    </div>
                    <div class="form-group">
                        <label for="hostGroup">Group</label>
                        <select id="hostGroup" name="hostGroup">
                            <option value="">No Group</option>
                        </select>
                        <span class="help-text">Organize hosts into groups</span>
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" name="description" placeholder="e.g., Production web server"></textarea>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="enableKeyMapping" name="enableKeyMapping" checked>
                            Enable Key Mapping (Recommended for security)
                        </label>
                        <span class="help-text">Maps API key to specific hostname to prevent key sharing</span>
                    </div>
                    <div id="apiKeyResult" style="display: none;">
                        <div class="alert alert-success show">
                            <strong>Host added successfully!</strong> Copy the API key below - it will only be shown once.
                        </div>
                        <div class="form-group">
                            <label>API Key</label>
                            <div class="api-key-display">
                                <button type="button" class="copy-btn" onclick="copyApiKey()">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <div id="generatedApiKey"></div>
                            </div>
                            <span class="help-text" style="color: #dc3545; font-weight: 600;">
                                ⚠️ Save this key securely. You won't be able to see it again!
                            </span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('addHostModal')">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveHostBtn">
                    <i class="fas fa-save"></i> Add Host
                </button>
            </div>
        </div>
    </div>

    <!-- Add Group Modal -->
    <div class="modal" id="addGroupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Group</h2>
                <button class="close-modal" onclick="closeModal('addGroupModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="groupAlert" class="alert"></div>
                <form id="addGroupForm">
                    <div class="form-group">
                        <label for="groupName">Group Name *</label>
                        <input type="text" id="groupName" name="groupName" required placeholder="e.g., Production Servers">
                    </div>
                    <div class="form-group">
                        <label for="groupIcon">Icon</label>
                        <select id="groupIcon" name="groupIcon">
                            <option value="fa-server">Server</option>
                            <option value="fa-database">Database</option>
                            <option value="fa-cloud">Cloud</option>
                            <option value="fa-network-wired">Network</option>
                            <option value="fa-desktop">Desktop</option>
                            <option value="fa-hdd">Storage</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="groupDescription">Description</label>
                        <textarea id="groupDescription" name="groupDescription" placeholder="Group description"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('addGroupModal')">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveGroupBtn">
                    <i class="fas fa-save"></i> Create Group
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Group Modal -->
    <div class="modal" id="editGroupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Group</h2>
                <button class="close-modal" onclick="closeModal('editGroupModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="editGroupAlert" class="alert"></div>
                <form id="editGroupForm">
                    <input type="hidden" id="editGroupId">
                    <div class="form-group">
                        <label for="editGroupName">Group Name *</label>
                        <input type="text" id="editGroupName" name="groupName" required placeholder="e.g., Production Servers">
                    </div>
                    <div class="form-group">
                        <label for="editGroupIcon">Icon</label>
                        <select id="editGroupIcon" name="groupIcon">
                            <option value="fa-server">Server</option>
                            <option value="fa-database">Database</option>
                            <option value="fa-cloud">Cloud</option>
                            <option value="fa-network-wired">Network</option>
                            <option value="fa-desktop">Desktop</option>
                            <option value="fa-hdd">Storage</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editGroupDescription">Description</label>
                        <textarea id="editGroupDescription" name="groupDescription" placeholder="Group description"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('editGroupModal')">Cancel</button>
                <button type="button" class="btn btn-primary" id="updateGroupBtn">
                    <i class="fas fa-save"></i> Update Group
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Host Modal -->
    <div class="modal" id="editHostModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Host</h2>
                <button class="close-modal" onclick="closeModal('editHostModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="editHostAlert" class="alert"></div>
                <form id="editHostForm">
                    <input type="hidden" id="editHostId">
                    <div class="form-group">
                        <label for="editHostname">Hostname *</label>
                        <input type="text" id="editHostname" name="hostname" required placeholder="e.g., web-server-01">
                        <span class="help-text">Unique identifier for this host</span>
                    </div>
                    <div class="form-group">
                        <label for="editIpAddress">IP Address</label>
                        <input type="text" id="editIpAddress" name="ipAddress" placeholder="e.g., 192.168.1.100">
                        <span class="help-text">Optional: Server IP address</span>
                    </div>
                    <div class="form-group">
                        <label for="editHostGroup">Group</label>
                        <select id="editHostGroup" name="hostGroup">
                            <option value="">No Group</option>
                        </select>
                        <span class="help-text">Organize hosts into groups</span>
                    </div>
                    <div class="form-group">
                        <label for="editDescription">Description</label>
                        <textarea id="editDescription" name="description" placeholder="e.g., Production web server"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('editHostModal')">Cancel</button>
                <button type="button" class="btn btn-primary" id="updateHostBtn">
                    <i class="fas fa-save"></i> Update Host
                </button>
            </div>
        </div>
    </div>

    <!-- Account Settings Modal -->
    <div class="modal" id="accountModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-user-circle"></i> Account Settings</h2>
                <button class="close-modal" onclick="closeModal('accountModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="accountAlert" class="alert"></div>
                
                <!-- Update Email -->
                <div class="settings-section">
                    <h3><i class="fas fa-envelope"></i> Email Address</h3>
                    <form id="updateEmailForm">
                        <div class="form-group">
                            <label for="currentEmail">Current Email</label>
                            <input type="email" id="currentEmail" disabled>
                        </div>
                        <div class="form-group">
                            <label for="newEmail">New Email *</label>
                            <input type="email" id="newEmail" name="newEmail" required placeholder="Enter new email">
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Email
                        </button>
                    </form>
                </div>

                <hr style="margin: 30px 0; border: none; border-top: 1px solid #e0e0e0;">

                <!-- Change Password -->
                <div class="settings-section">
                    <h3><i class="fas fa-key"></i> Change Password</h3>
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label for="currentPassword">Current Password *</label>
                            <input type="password" id="currentPassword" name="currentPassword" required placeholder="Enter current password">
                        </div>
                        <div class="form-group">
                            <label for="newPassword">New Password *</label>
                            <input type="password" id="newPassword" name="newPassword" required placeholder="Enter new password" minlength="6">
                            <span class="help-text">Minimum 6 characters</span>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password *</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="Confirm new password">
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Change Password
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- User Management Modal -->
    <div class="modal" id="userManagementModal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2><i class="fas fa-users"></i> User Management</h2>
                <button class="close-modal" onclick="closeModal('userManagementModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="userAlert" class="alert"></div>
                
                <!-- Add User Button -->
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary" onclick="showAddUserForm()">
                        <i class="fas fa-user-plus"></i> Add New User
                    </button>
                </div>

                <!-- Add User Form (Hidden by default) -->
                <div id="addUserForm" style="display: none; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                    <h3 style="margin-bottom: 15px;"><i class="fas fa-user-plus"></i> Add New User</h3>
                    <form id="createUserForm">
                        <div class="form-group">
                            <label for="newUsername">Username *</label>
                            <input type="text" id="newUsername" name="username" required placeholder="Enter username">
                        </div>
                        <div class="form-group">
                            <label for="newUserEmail">Email *</label>
                            <input type="email" id="newUserEmail" name="email" required placeholder="Enter email">
                        </div>
                        <div class="form-group">
                            <label for="newUserPassword">Password *</label>
                            <input type="password" id="newUserPassword" name="password" required placeholder="Enter password" minlength="6">
                            <span class="help-text">Minimum 6 characters</span>
                        </div>
                        <div class="form-group">
                            <label for="newUserRole">Role *</label>
                            <select id="newUserRole" name="role" required>
                                <option value="user">User</option>
                                <option value="admin">Administrator</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Create User
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddUserForm()">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>

                <!-- User List -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="userListBody">
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 40px;">
                                    <i class="fas fa-spinner fa-spin"></i> Loading users...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Settings View -->
    <div id="alertsView" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1><i class="fas fa-bell"></i> Alert Settings</h1>
                <p style="margin: 5px 0 0 0; color: #666; font-size: 14px;">Configure alert rules and notification channels</p>
            </div>
            <div class="header-right">
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="showAddChannelModal()">
                        <i class="fas fa-plus"></i>
                        Add Channel
                    </button>
                    <button class="btn btn-secondary" onclick="loadAlertConfig(); initializeAlertsView();">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                </div>
            </div>
        </header>

        <!-- Content -->
        <div class="content">
            <!-- Alert Statistics Cards -->
            <div class="alert-stats-grid">
                <div class="stat-card">
                    <div class="stat-icon danger">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="alertTotalToday">0</h3>
                        <p>Total Alerts Today</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon warning">
                        <i class="fas fa-bell-slash"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="alertUnresolved">0</h3>
                        <p>Unresolved Alerts</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon primary">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="alertActiveChannels">0</h3>
                        <p>Active Channels</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon success">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-details">
                        <h3 id="alertSystemStatus">Active</h3>
                        <p>System Status</p>
                    </div>
                </div>
            </div>

            <!-- Alert Configuration -->
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-sliders-h"></i> Alert Rules Configuration</h2>
                </div>
                <div class="card-body">
                <form id="alertConfigForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="alertEnabled" checked>
                                Enable Alert System
                            </label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="serverDownTimeout">
                                <i class="fas fa-server"></i> Server Down Timeout (seconds)
                            </label>
                            <input type="number" id="serverDownTimeout" value="60" min="30" max="300">
                            <small>Alert when no data received for this duration</small>
                        </div>

                        <div class="form-group">
                            <label for="cpuThreshold">
                                <i class="fas fa-microchip"></i> CPU Threshold (%)
                            </label>
                            <input type="number" id="cpuThreshold" value="70" min="50" max="100">
                            <small>Alert when CPU usage exceeds this percentage</small>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="diskThreshold">
                                <i class="fas fa-hdd"></i> Disk Threshold (%)
                            </label>
                            <input type="number" id="diskThreshold" value="90" min="50" max="100">
                            <small>Alert when disk usage exceeds this percentage</small>
                        </div>

                        <div class="form-group">
                            <label for="memoryThreshold">
                                <i class="fas fa-memory"></i> Memory Threshold (%)
                            </label>
                            <input type="number" id="memoryThreshold" value="90" min="50" max="100">
                            <small>Alert when memory usage exceeds this percentage</small>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="networkTimeout">
                                <i class="fas fa-network-wired"></i> Network Timeout (seconds)
                            </label>
                            <input type="number" id="networkTimeout" value="60" min="30" max="300">
                            <small>Alert when network not responding for this duration</small>
                        </div>

                        <div class="form-group">
                            <label for="cooldownPeriod">
                                <i class="fas fa-clock"></i> Cooldown Period (seconds)
                            </label>
                            <input type="number" id="cooldownPeriod" value="300" min="60" max="3600">
                            <small>Minimum time between duplicate alerts</small>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Configuration
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="loadAlertConfig()">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Notification Channels -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-paper-plane"></i> Notification Channels</h2>
            </div>
            <div class="card-body">
                <div id="channelsList">
                    <div style="text-align: center; padding: 40px; color: #999;">
                        <i class="fas fa-spinner fa-spin"></i> Loading channels...
                    </div>
                </div>
            </div>
        </div>

        <!-- Alert History -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-history"></i> Recent Alerts</h2>
            </div>
            <div class="card-body">
                <div id="alertHistoryList">
                    <div style="text-align: center; padding: 40px; color: #999;">
                        <i class="fas fa-spinner fa-spin"></i> Loading alert history...
                    </div>
                </div>
            </div>
        </div>
        </div><!-- End Content -->
    </div><!-- End Alert Settings View -->

    <!-- Add/Edit Notification Channel Modal -->
    <div id="channelModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-paper-plane"></i> <span id="channelModalTitle">Add Notification Channel</span></h2>
                <button class="close-modal" onclick="closeChannelModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="channelForm">
                    <div class="form-group">
                        <label for="channelType">Channel Type</label>
                        <select id="channelType" required onchange="updateChannelForm()">
                            <option value="">Select channel type...</option>
                            <option value="email">Email (SMTP)</option>
                            <option value="telegram">Telegram Bot</option>
                            <option value="whatsapp">WhatsApp</option>
                        </select>
                    </div>

                    <!-- Email Configuration -->
                    <div id="emailConfig" class="channel-config" style="display: none;">
                        <h3><i class="fas fa-envelope"></i> Email Configuration</h3>
                        <div class="form-group">
                            <label for="smtpServer">SMTP Server</label>
                            <input type="text" id="smtpServer" placeholder="smtp.gmail.com or smtp.zeptomail.com">
                            <small>Common servers: smtp.gmail.com, smtp.office365.com, smtp.zeptomail.com</small>
                        </div>
                        <div class="form-group">
                            <label for="smtpPort">SMTP Port</label>
                            <select id="smtpPort" onchange="updateSslOption()">
                                <option value="587">587 (STARTTLS - Recommended)</option>
                                <option value="465">465 (SSL/TLS)</option>
                                <option value="25">25 (Plain)</option>
                            </select>
                            <small>Port 587 for STARTTLS, 465 for SSL, 25 for plain (not recommended)</small>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="useSsl" style="width: auto; margin-right: 8px;">
                                Use SSL/TLS (for port 465)
                            </label>
                            <small>Check this if using port 465, uncheck for port 587 (STARTTLS)</small>
                        </div>
                        <div class="form-group">
                            <label for="smtpUsername">Username/Email</label>
                            <input type="text" id="smtpUsername" placeholder="your-email@gmail.com">
                        </div>
                        <div class="form-group">
                            <label for="smtpPassword">Password/App Password</label>
                            <input type="password" id="smtpPassword" placeholder="App Password or SMTP Password">
                            <small><a href="https://myaccount.google.com/apppasswords" target="_blank">Gmail App Password</a> | <a href="https://www.zeptomail.com/" target="_blank">Zeptomail</a></small>
                        </div>
                        <div class="form-group">
                            <label for="fromEmail">From Email</label>
                            <input type="email" id="fromEmail" placeholder="your-email@gmail.com">
                        </div>
                        <div class="form-group">
                            <label for="toEmails">To Emails (comma separated)</label>
                            <input type="text" id="toEmails" placeholder="admin@company.com, alert@company.com">
                        </div>
                    </div>

                    <!-- Telegram Configuration -->
                    <div id="telegramConfig" class="channel-config" style="display: none;">
                        <h3><i class="fab fa-telegram"></i> Telegram Configuration</h3>
                        <div class="form-group">
                            <label for="botToken">Bot Token</label>
                            <input type="text" id="botToken" placeholder="123456789:ABCdefGHIjklMNOpqrsTUVwxyz">
                            <small><a href="https://t.me/BotFather" target="_blank">Create bot with @BotFather</a></small>
                        </div>
                        <div class="form-group">
                            <label for="chatId">Chat ID</label>
                            <input type="text" id="chatId" placeholder="123456789">
                            <small>Send /start to bot, then get chat ID from bot updates</small>
                        </div>
                    </div>

                    <!-- WhatsApp Configuration -->
                    <div id="whatsappConfig" class="channel-config" style="display: none;">
                        <h3><i class="fab fa-whatsapp"></i> WhatsApp Configuration</h3>
                        <div class="form-group">
                            <label for="whatsappProvider">Provider</label>
                            <select id="whatsappProvider" onchange="updateWhatsAppForm()">
                                <option value="fonnte">Fonnte (Indonesia)</option>
                                <option value="twilio">Twilio (International)</option>
                            </select>
                        </div>

                        <!-- Fonnte Config -->
                        <div id="fonnte Config" class="provider-config">
                            <div class="form-group">
                                <label for="fonnte ApiKey">API Key</label>
                                <input type="text" id="fonnteApiKey" placeholder="Your Fonnte API Key">
                                <small><a href="https://fonnte.com" target="_blank">Get API key from Fonnte.com</a></small>
                            </div>
                            <div class="form-group">
                                <label for="fonnteTarget">Target Number</label>
                                <input type="text" id="fonnteTarget" placeholder="6281234567890">
                                <small>Without + or "whatsapp:" prefix</small>
                            </div>
                        </div>

                        <!-- Twilio Config -->
                        <div id="twilioConfig" class="provider-config" style="display: none;">
                            <div class="form-group">
                                <label for="twilioAccountSid">Account SID</label>
                                <input type="text" id="twilioAccountSid" placeholder="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                            </div>
                            <div class="form-group">
                                <label for="twilioAuthToken">Auth Token</label>
                                <input type="password" id="twilioAuthToken" placeholder="Your auth token">
                            </div>
                            <div class="form-group">
                                <label for="twilioFromNumber">From Number</label>
                                <input type="text" id="twilioFromNumber" placeholder="whatsapp:+14155238886">
                            </div>
                            <div class="form-group">
                                <label for="twilioToNumber">To Number</label>
                                <input type="text" id="twilioToNumber" placeholder="whatsapp:+6281234567890">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="channelEnabled" checked>
                            Enable this channel
                        </label>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Channel
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="testChannel()">
                            <i class="fas fa-paper-plane"></i> Test Notification
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="closeChannelModal()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Agent Installation Tutorial View -->
    <div id="agentTutorialView" class="view-content" style="display: none;">
        <div class="view-header">
            <h1><i class="fas fa-book"></i> Agent Installation Tutorial</h1>
            <p class="subtitle">Complete guide to install monitoring agent on your servers</p>
        </div>

        <div class="tutorial-container" style="max-width: 1200px; margin: 0 auto;">
            <!-- Quick Start Card -->
            <div class="info-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px;">
                <h2 style="color: white; margin-bottom: 15px;"><i class="fas fa-rocket"></i> Quick Start</h2>
                <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
                    Install the monitoring agent on your servers to enable real-time monitoring of CPU, memory, disk, network, and processes.
                </p>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <strong>Server URL:</strong> <code style="background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 4px; margin-left: 10px;">https://eyes.indoinfinite.com</code>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                    <strong>Your API Key:</strong> <code id="tutorialApiKey" style="background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 4px; margin-left: 10px;">Loading...</code>
                    <button onclick="copyTutorialApiKey()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 5px 12px; border-radius: 4px; margin-left: 10px; cursor: pointer; transition: all 0.3s;">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                </div>
            </div>

            <!-- API Key Info Card -->
            <div class="alert-info" style="margin-bottom: 30px; background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 8px; padding: 20px;">
                <i class="fas fa-info-circle" style="font-size: 24px; color: #0c5460;"></i>
                <div style="flex: 1;">
                    <strong style="color: #0c5460; display: block; margin-bottom: 8px;">Important: API Key Required</strong>
                    <p style="color: #0c5460; margin: 0; line-height: 1.6;">
                        The monitoring agent requires an API key for authentication. Your API key is shown above. 
                        Copy it and use it in the agent configuration below. Keep it secure and don't share it publicly.
                    </p>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-navigation" style="display: flex; gap: 10px; margin-bottom: 30px; border-bottom: 2px solid #e0e0e0;">
                <button class="tab-btn active" onclick="showTutorialTab('windows')" id="tab-windows">
                    <i class="fab fa-windows"></i> Windows
                </button>
                <button class="tab-btn" onclick="showTutorialTab('linux')" id="tab-linux">
                    <i class="fab fa-linux"></i> Linux
                </button>
                <button class="tab-btn" onclick="showTutorialTab('docker')" id="tab-docker">
                    <i class="fab fa-docker"></i> Docker
                </button>
                <button class="tab-btn" onclick="showTutorialTab('python')" id="tab-python">
                    <i class="fab fa-python"></i> Python Script
                </button>
            </div>

            <!-- Windows Tutorial -->
            <div id="tutorial-windows" class="tutorial-tab active">
                <h2><i class="fab fa-windows"></i> Windows Installation</h2>
                
                <div class="tutorial-step">
                    <h3><span class="step-number">1</span> Download Agent</h3>
                    <p>Download the monitoring agent Python script:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code># Via PowerShell
Invoke-WebRequest -Uri "https://raw.githubusercontent.com/wandiabdullah/monitoring/main/agent/agent.py" -OutFile "agent.py"</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">2</span> Install Python</h3>
                    <p>Download and install Python 3.8+ from <a href="https://www.python.org/downloads/" target="_blank">python.org</a></p>
                    <p>Make sure to check "Add Python to PATH" during installation.</p>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">3</span> Install Dependencies</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>pip install requests psutil</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">4</span> Configure Agent</h3>
                    <p>Edit <code>agent.py</code> and update the server URL and API key:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>SERVER_URL = "https://eyes.indoinfinite.com/api/metrics"
API_KEY = "your-api-key-here"  # Replace with your API key from dashboard</code></pre>
                    </div>
                    <p style="margin-top: 10px;"><strong>Note:</strong> Replace <code>your-api-key-here</code> with your actual API key shown at the top of this page.</p>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">5</span> Test Agent</h3>
                    <p>Run the agent manually to test:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>python agent.py</code></pre>
                    </div>
                    <p>You should see: <span class="success-text">✓ Metrics sent successfully</span></p>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">6</span> Run as Windows Service</h3>
                    <p>Create a batch file <code>start-agent.bat</code>:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>@echo off
:loop
python "C:\path\to\agent.py"
timeout /t 30 /nobreak
goto loop</code></pre>
                    </div>
                    <p>Add to Windows Task Scheduler to run at startup:</p>
                    <ol>
                        <li>Open Task Scheduler</li>
                        <li>Create Basic Task → Name: "Monitoring Agent"</li>
                        <li>Trigger: "When the computer starts"</li>
                        <li>Action: "Start a program" → Browse to <code>start-agent.bat</code></li>
                        <li>Check "Run with highest privileges"</li>
                    </ol>
                </div>
            </div>

            <!-- Linux Tutorial -->
            <div id="tutorial-linux" class="tutorial-tab" style="display: none;">
                <h2><i class="fab fa-linux"></i> Linux Installation</h2>
                
                <div class="tutorial-step">
                    <h3><span class="step-number">1</span> Download Agent</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>wget https://raw.githubusercontent.com/wandiabdullah/monitoring/main/agent/agent.py
# or
curl -O https://raw.githubusercontent.com/wandiabdullah/monitoring/main/agent/agent.py</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">2</span> Install Dependencies</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code># Ubuntu/Debian
sudo apt update
sudo apt install python3 python3-pip -y
pip3 install requests psutil

# CentOS/RHEL
sudo yum install python3 python3-pip -y
pip3 install requests psutil</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">3</span> Configure Agent</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>nano agent.py
# Update SERVER_URL and API_KEY:
SERVER_URL = "https://eyes.indoinfinite.com/api/metrics"
API_KEY = "your-api-key-here"  # Replace with your API key</code></pre>
                    </div>
                    <p style="margin-top: 10px;"><strong>Note:</strong> Copy your API key from the top of this page.</p>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">4</span> Test Agent</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>python3 agent.py</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">5</span> Create Systemd Service</h3>
                    <p>Create service file:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>sudo nano /etc/systemd/system/monitoring-agent.service</code></pre>
                    </div>
                    <p>Add this content:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>[Unit]
Description=Server Monitoring Agent
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root
ExecStart=/usr/bin/python3 /root/agent.py
Restart=always
RestartSec=30

[Install]
WantedBy=multi-user.target</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">6</span> Enable and Start Service</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>sudo systemctl daemon-reload
sudo systemctl enable monitoring-agent
sudo systemctl start monitoring-agent
sudo systemctl status monitoring-agent</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">7</span> Check Logs</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>sudo journalctl -u monitoring-agent -f</code></pre>
                    </div>
                </div>
            </div>

            <!-- Docker Tutorial -->
            <div id="tutorial-docker" class="tutorial-tab" style="display: none;">
                <h2><i class="fab fa-docker"></i> Docker Installation</h2>
                
                <div class="tutorial-step">
                    <h3><span class="step-number">1</span> Create Dockerfile</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>FROM python:3.11-slim

WORKDIR /app

# Install dependencies
RUN pip install --no-cache-dir requests psutil

# Copy agent script
COPY agent.py .

# Run agent
CMD ["python", "agent.py"]</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">2</span> Download Agent</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>wget https://raw.githubusercontent.com/wandiabdullah/monitoring/main/agent/agent.py</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">3</span> Configure Agent</h3>
                    <p>Edit <code>agent.py</code> and set server URL and API key:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>SERVER_URL = "https://eyes.indoinfinite.com/api/metrics"
API_KEY = "your-api-key-here"  # Replace with your API key from dashboard</code></pre>
                    </div>
                    <p style="margin-top: 10px;"><strong>Note:</strong> Copy your API key from the top of this page.</p>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">4</span> Build Docker Image</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>docker build -t monitoring-agent .</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">5</span> Run Container</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>docker run -d \
  --name monitoring-agent \
  --restart unless-stopped \
  --network host \
  monitoring-agent</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">6</span> Check Logs</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>docker logs -f monitoring-agent</code></pre>
                    </div>
                </div>

                <div class="alert-info" style="margin-top: 20px;">
                    <i class="fas fa-info-circle"></i>
                    <strong>Note:</strong> Using <code>--network host</code> allows the agent to collect accurate network statistics.
                </div>
            </div>

            <!-- Python Script Tutorial -->
            <div id="tutorial-python" class="tutorial-tab" style="display: none;">
                <h2><i class="fab fa-python"></i> Python Script Installation</h2>
                
                <div class="tutorial-step">
                    <h3><span class="step-number">1</span> Requirements</h3>
                    <ul>
                        <li>Python 3.8 or higher</li>
                        <li>pip (Python package manager)</li>
                        <li>Network access to monitoring server</li>
                    </ul>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">2</span> Download Agent Script</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code># Download from GitHub
curl -O https://raw.githubusercontent.com/wandiabdullah/monitoring/main/agent/agent.py

# Or create manually (see full script below)</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">3</span> Install Python Packages</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>pip install requests psutil</code></pre>
                    </div>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">4</span> Configure Server URL and API Key</h3>
                    <p>Edit the <code>SERVER_URL</code> and <code>API_KEY</code> variables in agent.py:</p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>SERVER_URL = "https://eyes.indoinfinite.com/api/metrics"
API_KEY = "your-api-key-here"  # Replace with your API key from dashboard
INTERVAL = 30  # Send metrics every 30 seconds</code></pre>
                    </div>
                    <p style="margin-top: 10px;"><strong>Note:</strong> Copy your API key from the top of this page.</p>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">5</span> Run Agent</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>python agent.py</code></pre>
                    </div>
                    <p>The agent will run continuously and send metrics every 30 seconds.</p>
                </div>

                <div class="tutorial-step">
                    <h3><span class="step-number">6</span> Run in Background</h3>
                    <p><strong>Linux/Mac:</strong></p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>nohup python agent.py > agent.log 2>&1 &</code></pre>
                    </div>
                    <p><strong>Windows (PowerShell):</strong></p>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                        <pre><code>Start-Process python -ArgumentList "agent.py" -WindowStyle Hidden</code></pre>
                    </div>
                </div>
            </div>

            <!-- Verification Section -->
            <div class="verification-section" style="margin-top: 40px; padding: 30px; background: #f8f9fa; border-radius: 12px;">
                <h2><i class="fas fa-check-circle"></i> Verification</h2>
                <p>After installing the agent, verify it's working:</p>
                
                <div class="verification-steps">
                    <div class="verification-item">
                        <i class="fas fa-1"></i>
                        <div>
                            <strong>Check Dashboard</strong>
                            <p>Go to "All Hosts" menu - your server should appear within 30 seconds</p>
                        </div>
                    </div>
                    <div class="verification-item">
                        <i class="fas fa-2"></i>
                        <div>
                            <strong>Check Metrics</strong>
                            <p>Click on your hostname to see real-time CPU, memory, disk, and network charts</p>
                        </div>
                    </div>
                    <div class="verification-item">
                        <i class="fas fa-3"></i>
                        <div>
                            <strong>Check Agent Logs</strong>
                            <p>Look for "✓ Metrics sent successfully" messages</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Troubleshooting Section -->
            <div class="troubleshooting-section" style="margin-top: 30px; padding: 30px; background: #fff3cd; border-radius: 12px;">
                <h2><i class="fas fa-exclamation-triangle"></i> Troubleshooting</h2>
                
                <div class="trouble-item">
                    <h4>Server not appearing in dashboard?</h4>
                    <ul>
                        <li>Check agent is running: <code>ps aux | grep agent.py</code></li>
                        <li>Verify SERVER_URL is correct</li>
                        <li>Check network connectivity: <code>curl -I https://eyes.indoinfinite.com</code></li>
                        <li>Check firewall allows outbound HTTPS (port 443)</li>
                    </ul>
                </div>

                <div class="trouble-item">
                    <h4>Permission errors?</h4>
                    <ul>
                        <li>Run agent with appropriate permissions (root/admin for full metrics)</li>
                        <li>On Linux: <code>sudo python3 agent.py</code></li>
                        <li>On Windows: Run PowerShell/Command Prompt as Administrator</li>
                    </ul>
                </div>

                <div class="trouble-item">
                    <h4>Import errors?</h4>
                    <ul>
                        <li>Verify dependencies: <code>pip list | grep -E "requests|psutil"</code></li>
                        <li>Reinstall: <code>pip install --upgrade requests psutil</code></li>
                        <li>Use correct Python version: <code>python --version</code> (should be 3.8+)</li>
                    </ul>
                </div>
            </div>

            <!-- Additional Resources -->
            <div class="resources-section" style="margin-top: 30px; padding: 30px; background: white; border-radius: 12px; border: 2px solid #e0e0e0;">
                <h2><i class="fas fa-link"></i> Additional Resources</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div class="resource-card">
                        <i class="fab fa-github" style="font-size: 32px; color: #333;"></i>
                        <h4>GitHub Repository</h4>
                        <a href="https://github.com/wandiabdullah/monitoring" target="_blank">View Source Code</a>
                    </div>
                    <div class="resource-card">
                        <i class="fas fa-book" style="font-size: 32px; color: #667eea;"></i>
                        <h4>API Documentation</h4>
                        <a href="https://eyes.indoinfinite.com/api/docs" target="_blank">API Reference</a>
                    </div>
                    <div class="resource-card">
                        <i class="fas fa-question-circle" style="font-size: 32px; color: #17a2b8;"></i>
                        <h4>Support</h4>
                        <a href="mailto:support@indoinfinite.com">Contact Support</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </main>
    <!-- End Main Content -->

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <!-- Load frontend script from Flask static folder to avoid routing conflicts -->
    <script src="/static/dashboard.js?v=20251110020"></script>
</body>
</html>
